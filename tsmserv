- name: check if dsm.opt exists
  ansible.builtin.stat:
    path: "{{ dsmopt_dir }}/dsm.opt"
  register: dsm_opt_file

- name: backup dsm.opt option file
  ansible.builtin.copy:
    src: "{{ dsmopt_dir }}/dsm.opt"
    dest: "{{ backup_dir }}/dsm.opt.back"
    remote_src: yes
  when: dsm_opt_file.stat.exists

- name: check if dsm.sys exists
  ansible.builtin.stat:
    path: "{{ dsmopt_dir }}/dsm.sys"
  register: dsm_sys_file

- name: backup dsm.sys option file
  ansible.builtin.copy:
    src: "{{ dsmopt_dir }}/dsm.sys"
    dest: "{{ backup_dir }}/dsm.sys.back"
    remote_src: yes
  when: dsm_sys_file.stat.exists
